
const questionsDB = [
    {
        "question": "Which of the following characters are part of SpongeBob Squarepants series? ",
        "correct_answer": ["Squidward", "Mr. Krabs", "Plankton"],
        "incorrect_answers": [
            "Eric Cartman"
        ]
    },
    {
        "question": "Which of the following characters are part of The Simpsons series? ",
        "correct_answer": ["Bart", "Homer"],
        "incorrect_answers": [
            "SpongeBob Squarepants",
            "Eric Cartman",
        ]
    },
    {
        "question": "Which of the following characters are part of Lord of the rings series? ",
        "correct_answer": ["Legolas", "Frodo"],
        "incorrect_answers": [
            "Dumbledoor",
            "Ron Wesley",
        ]
    },
    {
        "question": "Who wrote \"Harry Potter\"?",
        "correct_answer": ["J.K. Rowling"],
        "incorrect_answers": [
            "J.R.R. Tolkien",
            "Terry Pratchett",
            "Daniel Radcliffe"
        ]
    },
    {
        "question": "Who wrote the \"A Song of Ice And Fire\" fantasy novel series?",
        "correct_answer": ["George R. R. Martin"],
        "incorrect_answers": [
            "George Lucas",
            "George Orwell",
            "George Eliot"
        ]
    },
    {
        "question": "George Orwell wrote this book, which is often considered a statement on government oversight.",
        "correct_answer": ["1984"],
        "incorrect_answers": [
            "The Old Man and the Sea",
            "Catcher and the Rye",
            "To Kill a Mockingbird"
        ]
    },
    {
        "question": "In the Beatrix Potter books, what type of animal is Tommy Brock?",
        "correct_answer": ["Badger"],
        "incorrect_answers": [
            "Fox",
            "Frog",
            "Rabbit"
        ]
    },
    {
        "question": "Who wrote the novel \"Moby-Dick\"?",
        "correct_answer": ["Herman Melville"],
        "incorrect_answers": [
            "William Golding",
            "William Shakespeare",
            "J. R. R. Tolkien"
        ]
    },
    {
        "question": "In the Harry Potter universe, what is Cornelius Fudge's middle name?",
        "correct_answer": ["Oswald"],
        "incorrect_answers": [
            "James",
            "Harold",
            "Christopher"
        ]
    },
    {
        "question": "In the Harry Potter universe, who does Draco Malfoy end up marrying?",
        "correct_answer": ["Astoria Greengrass"],
        "incorrect_answers": [
            "Pansy Parkinson",
            "Millicent Bulstrode",
            "Hermione Granger"
        ]
    },
    {
        "question": "What is Ron Weasley's middle name?",
        "correct_answer": ["Bilius"],
        "incorrect_answers": [
            "Arthur",
            "John",
            "Dominic"
        ]
    },
    {
        "question": "In the Lord of the Rings, who is the father of the dwarf Gimli?",
        "correct_answer": ["Gloin"],
        "incorrect_answers": [
            "Thorin Oakenshield",
            "Bombur",
            "Dwalin"
        ]
    },
    {
        "question": "By what nickname is Jack Dawkins known in the Charles Dickens novel, 'Oliver Twist'?",
        "correct_answer": ["The Artful Dodger"],
        "incorrect_answers": [
            "Fagin",
            "Bullâ€™s-eye",
            "Mr. Fang"
        ]
    },
    {
        "question": "Which famous spy novelist wrote the childrens' story \"Chitty-Chitty-Bang-Bang\"?",
        "correct_answer": ["Ian Fleming"],
        "incorrect_answers": [
            "Joseph Conrad",
            "John Buchan",
            "Graham Greene"
        ]
    },
    {
        "question": "What was the name of the Mysterious Island, in Jules Verne's \"The Mysterious Island\"?",
        "correct_answer": ["Lincoln Island"],
        "incorrect_answers": [
            "Vulcania Island",
            "Prometheus Island",
            "Neptune Island"
        ]
    },
    {
        "question": "Who wrote the children's story \"The Little Match Girl\"?",
        "correct_answer": ["Hans Christian Andersen"],
        "incorrect_answers": [
            "Charles Dickens",
            "Lewis Carroll",
            "Oscar Wilde"
        ]
    },
    {
        "question": "How many Harry Potter books are there?",
        "correct_answer": ["7"],
        "incorrect_answers": [
            "8",
            "5",
            "6"
        ]
    },
    {
        "question": "The novel \"Jane Eyre\" was written by what author? ",
        "correct_answer": ["Charlotte Bronte"],
        "incorrect_answers": [
            "Emily Bronte",
            "Jane Austen",
            "Louisa May Alcott"
        ]
    },
    {
        "question": "Who wrote the young adult novel \"The Fault in Our Stars\"?",
        "correct_answer": ["John Green"],
        "incorrect_answers": [
            "Stephenie Meyer",
            "Suzanne Collins",
            "Stephen Chbosky"
        ]
    },
    {
        "question": "Which of these does Charlie NOT read in The Perks of Being a Wallflower?",
        "correct_answer": ["The Grapes of Wrath"],
        "incorrect_answers": [
            "Hamlet",
            "The Great Gatsby",
            "Peter Pan"
        ]
    },
    {
        "question": "In the year 1818, novelist Mary Shelly is credited with writing a fiction novel and creating this infamous character.",
        "correct_answer": ["Frankenstein's monster"],
        "incorrect_answers": [
            "Dracula",
            "The Thing",
            "The Invisible Man"
        ]
    },
    {
        "question": "What is the name of the three headed dog in Harry Potter and the Sorcerer's Stone?",
        "correct_answer": ["Fluffy"],
        "incorrect_answers": [
            "Spike",
            "Poofy",
            "Spot"
        ]
    },
    {
        "question": "The title of Adolf Hitler's autobiography \"Mein Kampf\" is what when translated to English?",
        "correct_answer": ["My Struggle"],
        "incorrect_answers": [
            "My Hatred",
            "My Sadness",
            "My Desire"
        ]
    },
    {
        "question": "What is the name of the protagonist of J.D. Salinger's novel Catcher in the Rye?",
        "correct_answer": ["Holden Caulfield"],
        "incorrect_answers": [
            "Fletcher Christian",
            "Jay Gatsby",
            "Randall Flagg"
        ]
    },
    {
        "question": "Which American author was also a budding travel writer and wrote of his adventures with his dog Charley?",
        "correct_answer": ["John Steinbeck"],
        "incorrect_answers": [
            "F. Scott Fitzgerald",
            "Ernest Hemingway",
            "William Faulkner"
        ]
    },
    {
        "question": "What is the name of the gang that Ponyboy is a part of in the book, The Outsiders?",
        "correct_answer": ["The Greasers"],
        "incorrect_answers": [
            "The Outsiders",
            "The Mafia",
            "The Socs"
        ]
    },
    {
        "question": "Which of the following is NOT a work done by Shakespeare?",
        "correct_answer": ["Trial of Temperance"],
        "incorrect_answers": [
            "Measure For Measure",
            "Titus Andronicus",
            "Cymbeline"
        ]
    },
    {
        "question": "What book series published by Jim Butcher follows a wizard in modern day Chicago?",
        "correct_answer": ["The Dresden Files"],
        "incorrect_answers": [
            "A Hat in Time",
            "The Cinder Spires",
            "My Life as a Teenage Wizard"
        ]
    },
    {
        "question": "What was the last message of the Dolphins in \"The Hitchhiker's Guide to the Galaxy\"?",
        "correct_answer": ["\"So long, and thanks for all the fish.\""],
        "incorrect_answers": [
            "\"The answer is 42.\"",
            "\"Land of the brave.\"",
            "\"Goodbye cruel world!\""
        ]
    },
    {
        "question": "What is the make and model of the tour vehicles in \"Jurassic Park\" (1990)?",
        "correct_answer": ["1989 Toyota Land Cruiser"],
        "incorrect_answers": [
            "1989 Jeep Wrangler YJ Sahar",
            "1989 Ford Explorer XLT",
            "Mercedes M-Class"
        ]
    },
    {
        "question": "In the book series \"Odd Thomas\", Danny Jessup has what genetic disease? ",
        "correct_answer": [" Osteogenesis Imperfecta"],
        "incorrect_answers": [
            "Spinocerebellar ataxia",
            "Adrenoleukodystrophy",
            "Cystic Fibrosis"
        ]
    },
    {
        "question": "In Margaret Atwood's \"The Handmaid's Tale\", what is Offred's real name is implied to be?",
        "correct_answer": ["June"],
        "incorrect_answers": [
            "August",
            "April",
            "May"
        ]
    },
    {
        "question": "Which of the following was the author of \"Username Evie\"?",
        "correct_answer": ["Joe Sugg"],
        "incorrect_answers": [
            "Zoe Sugg",
            "Joe Weller",
            "Alfie Deyes"
        ]
    },
    {
        "question": "In the Magic: The Gathering universe,  the Antiquities, Ice Age, and Alliances expansions take place on which continent?",
        "correct_answer": ["Terisiare"],
        "incorrect_answers": [
            "Aerona",
            "Shiv",
            "Jamuraa"
        ]
    },
    {
        "question": "In the Magic: The Gathering universe, the Fallen Empires expansion takes place on which continent?",
        "correct_answer": ["Sarpadia"],
        "incorrect_answers": [
            "Otaria",
            "Terisiare",
            "Shiv"
        ]
    },
    {
        "question": "In the Magic: The Gathering universe, which plane does the Homelands expansion take place in?",
        "correct_answer": ["Ulgrotha"],
        "incorrect_answers": [
            "Bant",
            "Llanowar",
            "Tazeem"
        ]
    },
    {
        "question": "What's the second book in George R. R. Martin's 'A Song of Ice and Fire' series?",
        "correct_answer": ["A Clash of Kings"],
        "incorrect_answers": [
            "A Dance with Dragons",
            "A Storm of Swords",
            "A Feast for Crows"
        ]
    },
    {
        "question": "In which classic novel is there a character named Homer Simpson?",
        "correct_answer": ["The Day of the Locust"],
        "incorrect_answers": [
            "Catch-22",
            "Of Mice and Men",
            "A Separate Peace"
        ]
    },
    {
        "question": "What was the first ever entry written for the SCP Foundation collaborative writing project?",
        "correct_answer": ["SCP-173"],
        "incorrect_answers": [
            "SCP-001",
            "SCP-999",
            "SCP-1459"
        ]
    },
    {
        "question": "Which is NOT a book in the Harry Potter Series?",
        "correct_answer": ["The House Elf"],
        "incorrect_answers": [
            "The Chamber of Secrets",
            "The Prisoner of Azkaban",
            "The Deathly Hallows"
        ]
    },
    {
        "question": "In the novel 1984, written by George Orwell, what is the name of the totalitarian regime that controls Oceania?",
        "correct_answer": ["INGSOC"],
        "incorrect_answers": [
            "Neo-Bolshevism",
            "Obliteration of the Self",
            "Earth Alliance"
        ]
    },
    {
        "question": "Which novel by John Grisham was conceived on a road trip to Florida while thinking about stolen books with his wife?",
        "correct_answer": ["Camino Island"],
        "incorrect_answers": [
            "Rogue Lawyer",
            "Gray Mountain",
            "The Litigators"
        ]
    },
    {
        "question": "Which fictional English county was the setting for Thomas Hardy's novels?",
        "correct_answer": ["Wessex"],
        "incorrect_answers": [
            "Barsetshire",
            "Fulchester",
            "Ambridge"
        ]
    },
    {
        "question": "In which classic novel by Mark Twain did a beggar and Prince of Wales switch clothes, and learn about social class inequality?",
        "correct_answer": ["The Prince and the Pauper"],
        "incorrect_answers": [
            "Hamlet",
            "Wealthy Boy and the Schmuck",
            "A Modern Twain Story"
        ]
    },
    {
        "question": "Which Russian author wrote the epic novel War and Peace?",
        "correct_answer": ["Leo Tolstoy"],
        "incorrect_answers": [
            "Fyodor Dostoyevsky",
            "Alexander Pushkin",
            "Vladimir Nabokov"
        ]
    },
    {
        "question": "What was Sir Handel's original name in \"The Railway Series\" and it's animated counterpart \"Thomas and Friends?\"",
        "correct_answer": ["Falcon"],
        "incorrect_answers": [
            "Eagle",
            "Kyte",
            "Swallow"
        ]
    },
    {
        "question": "What is the name of the town in which Lily and James Potter are buried?",
        "correct_answer": ["Godric's Hollow"],
        "incorrect_answers": [
            "Hogsmeade",
            "Ottery St. Catchpole",
            "Little Hangleton"
        ]
    }
];

let questionIndex = 0;
let questions;

function getRandom() {
    let shuffled = questionsDB.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, 10);
}

function removeDots() {
    document.querySelectorAll(".ind:not(.ind:nth-of-type(1))").forEach(e => {
        e.classList.remove("ind--current");
    });
}

function removeSelected() {
    document.querySelectorAll(".ans--selected").forEach(e => {
        e.classList.remove("ans--selected");
    });
}

const Toast = Swal.mixin({
    toast: true,
    position: 'top-end',
    showConfirmButton: false,
    timer: 3000,
    timerProgressBar: true,
    icon: 'success',
    title: 'Your answer is correct!'
})


function check() {
    let answer = [];
    document.querySelectorAll(".ans--selected>.ans-text").forEach((e) => {
        answer.push(e.innerHTML);
    })
    answer.sort();
    questions[questionIndex].correct_answer.sort()
    for (let i = 0; i < questions[questionIndex].correct_answer.length; i++) {
        if (answer[i] !== questions[questionIndex].correct_answer[i]) {

            Swal.fire({
                title: 'Wrong!',
                icon: 'error',
                html: `You have answered ${questionIndex}/10 corectly!`,
                focusConfirm: false,
                confirmButtonText: 'Restart',
            }).then(() => {
                questions = getRandom();
                questionIndex = 0;
                removeDots();
                displayQ()
            });

            return false;
        }
    }
    if (questionIndex == 9) {
        Swal.fire(
            'Congrats!',
            'You have answered all the questions corectly!',
            'success'
        ).then(() => {
            questionIndex = 0;
            questions = getRandom();
            removeDots();
            displayQ();
        })
    }
    else {
        Toast.fire();
        questionIndex++;
        displayQ();
    }
}

function displayQ() {
    removeSelected();
    let answers = [...questions[questionIndex].correct_answer, ...questions[questionIndex].incorrect_answers];
    answers = answers.sort(() => 0.5 - Math.random());
    document.querySelector(".question-number").innerHTML = `Question: ${questionIndex + 1}/10`;
    document.querySelector(".question-text__text").innerHTML = questions[questionIndex].question;
    document.querySelector(`.ind:nth-of-type(${questionIndex + 1})`).classList.add("ind--current");
    document.querySelectorAll(".ans-text").forEach((e, ind) => {
        e.innerHTML = answers[ind];
    });
}

(() => {
    questions = getRandom();
    displayQ()
    document.querySelectorAll(".ans-text").forEach((e, ind) => {
        e.parentElement.addEventListener("click", () => {
            e.parentElement.classList.toggle("ans--selected");
        })
    })
    document.querySelector(".submit-btn").addEventListener("click", () => {
        check();
    })
})();